# Vue.jsçˆ±æƒ…è®°å½•ç½‘ç«™é¡¹ç›®æ€»ç»“

## é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäºŽVue.jsçš„å…¨æ ˆçˆ±æƒ…è®°å½•ç½‘ç«™ï¼Œæ—¨åœ¨å¸®åŠ©æƒ…ä¾£è®°å½•å’Œåˆ†äº«ä»–ä»¬çš„ç¾Žå¥½æ—¶å…‰ã€‚é¡¹ç›®é‡‡ç”¨çŽ°ä»£åŒ–çš„æŠ€æœ¯æ ˆï¼ŒåŒ…æ‹¬Vue 3ã€TypeScriptã€Node.jsã€Expressã€MongoDBç­‰ï¼Œå®žçŽ°äº†å®Œæ•´çš„å‰åŽç«¯åˆ†ç¦»æž¶æž„ã€‚

## æœ€è¿‘æ›´æ–°

### é›†æˆ Lightning CSS
- ä½¿ç”¨ Lightning CSS æ›¿ä»£ PostCSS å’Œ autoprefixer ä½œä¸º CSS å¤„ç†å™¨
- æ›´æ–°äº† Vite é…ç½®ä»¥æ”¯æŒ Lightning CSS
- ä¿®å¤äº†ä¸Ž Lightning CSS ä¸å…¼å®¹çš„ CSS è¯­æ³•
- ä¼˜åŒ–äº† CSS æ ·å¼ä»¥æé«˜æž„å»ºæ€§èƒ½

### å›žå¿†ç®¡ç†åŠŸèƒ½å®Œå–„
- å®žçŽ°äº†å›žå¿†çš„æ·»åŠ ã€ç¼–è¾‘å’Œåˆ é™¤åŠŸèƒ½
- åˆ›å»ºäº†MemoryForm.vueç»„ä»¶ç”¨äºŽæ·»åŠ å’Œç¼–è¾‘å›žå¿†
- æ›´æ–°äº†MemoriesView.vueç»„ä»¶ä»¥ä»ŽåŽç«¯APIèŽ·å–çœŸå®žæ•°æ®
- å¢žå¼ºäº†MemoryCard.vueç»„ä»¶ä»¥æ”¯æŒç¼–è¾‘å’Œåˆ é™¤æ“ä½œ
- å®žçŽ°äº†å®Œæ•´çš„CRUDæ“ä½œï¼ˆåˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤ï¼‰

## æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯æ ˆ
- **Vue 3**: æœ€æ–°çš„Vue.jsç‰ˆæœ¬ï¼Œä½¿ç”¨Composition API
- **TypeScript**: å…¨å±€ä½¿ç”¨TypeScriptè¿›è¡Œç±»åž‹å®‰å…¨å¼€å‘
- **Vite**: å¿«é€Ÿæž„å»ºå·¥å…·ï¼Œæä¾›æžé€Ÿçš„å¼€å‘æœåŠ¡å™¨å¯åŠ¨
- **Lightning CSS**: é«˜æ€§èƒ½CSSè§£æžå™¨ã€è½¬æ¢å™¨å’Œä¼˜åŒ–å™¨
- **Tailwind CSS**: å®žç”¨ä¼˜å…ˆçš„CSSæ¡†æž¶ï¼Œå¿«é€Ÿæž„å»ºè‡ªå®šä¹‰UI
- **Pinia**: æ–°ä¸€ä»£çŠ¶æ€ç®¡ç†åº“
- **Vue Router**: å•é¡µé¢åº”ç”¨è·¯ç”±ç®¡ç†
- **Heroicons**: ç²¾ç¾Žçš„å›¾æ ‡åº“
- **vue3-carousel**: è½®æ’­ç»„ä»¶
- **PhotoSwipe**: å›¾ç‰‡æµè§ˆåº“
- **Day.js**: è½»é‡çº§æ—¥æœŸå¤„ç†åº“

### åŽç«¯æŠ€æœ¯æ ˆ
- **Node.js**: JavaScriptè¿è¡Œæ—¶çŽ¯å¢ƒ
- **Vercel Serverless Functions**: æ— æœåŠ¡å™¨å‡½æ•°æ‰§è¡ŒçŽ¯å¢ƒ
- **TypeScript**: å…¨å±€ä½¿ç”¨TypeScriptè¿›è¡Œç±»åž‹å®‰å…¨å¼€å‘
- **MongoDB**: NoSQLæ–‡æ¡£æ•°æ®åº“
- **MongoDB Native Driver**: åŽŸç”Ÿæ•°æ®åº“é©±åŠ¨ï¼ˆServerlessæ¨¡å¼ï¼‰
- **Mongoose**: MongoDBå¯¹è±¡å»ºæ¨¡å·¥å…·ï¼ˆä¼ ç»Ÿæ¨¡å¼ï¼‰
- **JWT**: èº«ä»½è®¤è¯ä»¤ç‰Œ
- **EmailJS**: é‚®ä»¶å‘é€æœåŠ¡
- **Multer**: æ–‡ä»¶ä¸Šä¼ ä¸­é—´ä»¶ï¼ˆä¼ ç»Ÿæ¨¡å¼ï¼‰
- **Formidable**: æ–‡ä»¶ä¸Šä¼ è§£æžï¼ˆServerlessæ¨¡å¼ï¼‰
- **åŠ¨æ€è·¯ç”±**: ä½¿ç”¨ [endpoint].ts å’Œ [id].ts å®žçŽ°çµæ´»çš„ç«¯ç‚¹æ˜ å°„

### å¼€å‘ä¸Žéƒ¨ç½²å·¥å…·
- **PNPM**: é«˜æ•ˆçš„åŒ…ç®¡ç†å™¨
- **ESLint**: ä»£ç è´¨é‡æ£€æŸ¥å·¥å…·
- **Prettier**: ä»£ç æ ¼å¼åŒ–å·¥å…·
- **Vite Plugin PWA**: PWAæ”¯æŒæ’ä»¶

## é¡¹ç›®ç»“æž„

```
love-story-website/
â”œâ”€â”€ src/                    # å‰ç«¯æºç 
â”‚   â”œâ”€â”€ assets/             # é™æ€èµ„æº
â”‚   â”œâ”€â”€ components/         # Vueç»„ä»¶
â”‚   â”œâ”€â”€ views/              # é¡µé¢è§†å›¾
â”‚   â”œâ”€â”€ router/             # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ stores/             # PiniaçŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ types/              # TypeScriptç±»åž‹å®šä¹‰
â”‚   â”œâ”€â”€ services/           # APIæœåŠ¡å°è£…
â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ App.vue             # æ ¹ç»„ä»¶
â”œâ”€â”€ server/                 # åŽç«¯æœåŠ¡
â”‚   â”œâ”€â”€ controllers/        # æŽ§åˆ¶å™¨
â”‚   â”œâ”€â”€ models/             # æ•°æ®æ¨¡åž‹
â”‚   â”œâ”€â”€ routes/             # è·¯ç”±
â”‚   â”œâ”€â”€ middleware/         # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ config/             # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ types/              # TypeScriptç±»åž‹å®šä¹‰
â”‚   â””â”€â”€ server.ts           # æœåŠ¡å…¥å£
â”œâ”€â”€ public/                 # å…¬å…±èµ„æº
â””â”€â”€ tests/                  # æµ‹è¯•æ–‡ä»¶
```

## æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. ç”¨æˆ·ç³»ç»Ÿ
- ç”¨æˆ·æ³¨å†Œä¸Žç™»å½•
- JWTèº«ä»½éªŒè¯
- ç”¨æˆ·èµ„æ–™ç®¡ç†

### 2. çˆ±æƒ…æ—¶é—´è½´
- åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤è®°å¿†
- æ—¶é—´æŽ’åºæ˜¾ç¤º
- è¯¦æƒ…æŸ¥çœ‹

### 3. ç…§ç‰‡ç›¸å†Œ
- å›¾ç‰‡ä¸Šä¼ ä¸Žç®¡ç†
- MongoDB GridFS å­˜å‚¨
- ç…§ç‰‡æµè§ˆä¸Žåˆ é™¤

### 4. çºªå¿µæ—¥æé†’
- åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤çºªå¿µæ—¥ï¼ˆå…¨å±€å…±äº«ï¼Œä¸å†å…³è”ç‰¹å®šç”¨æˆ·ï¼‰
- EmailJSé‚®ä»¶æé†’åŠŸèƒ½ï¼ˆæ”¯æŒç§é’¥è®¤è¯ï¼‰
- æ¯æ—¥æ—©ä¸Š7ç‚¹è‡ªåŠ¨æ£€æŸ¥å¹¶å‘é€é‚®ä»¶æé†’
- æ‰¹é‡é‚®ä»¶å‘é€ï¼šä¸€ä¸ªçºªå¿µæ—¥ä¼šå‘æ‰€æœ‰ç”¨æˆ·å‘é€é‚®ä»¶
- æå‰æé†’å¤©æ•°è®¾ç½®
- è‡ªåŠ¨è®¡ç®—å‰©ä½™å¤©æ•°å’Œæ—¥æœŸæ ¼å¼åŒ–
- æ”¯æŒä¸­æ–‡æ—¥æœŸæ ¼å¼å’Œæ˜ŸæœŸæ˜¾ç¤º
- æµ‹è¯•å‘é€åŠŸèƒ½ï¼šæ‰‹åŠ¨è§¦å‘é‚®ä»¶å‘é€ç”¨äºŽæµ‹è¯•

## TypeScriptå®žçŽ°

### åŽç«¯TypeScriptç‰¹æ€§
- å®Œæ•´çš„ç±»åž‹å®šä¹‰è¦†ç›–æ‰€æœ‰æ¨¡åž‹ã€æŽ§åˆ¶å™¨ã€è·¯ç”±
- æŽ¥å£å®šä¹‰æ¸…æ™°ï¼Œç±»åž‹å®‰å…¨
- ä½¿ç”¨TypeScriptç¼–è¯‘å™¨è¿›è¡Œä»£ç ç¼–è¯‘

### å‰ç«¯TypeScriptç‰¹æ€§
- Vueç»„ä»¶ä½¿ç”¨Composition API + TypeScript
- PiniaçŠ¶æ€ç®¡ç†ä½¿ç”¨ç±»åž‹å®šä¹‰
- Vue Routerä½¿ç”¨ç±»åž‹å®šä¹‰
- APIæœåŠ¡å°è£…å…·æœ‰å®Œæ•´çš„ç±»åž‹æ”¯æŒ

## å¼€å‘çŽ¯å¢ƒé…ç½®

### çŽ¯å¢ƒå˜é‡é…ç½®

#### å‰ç«¯çŽ¯å¢ƒå˜é‡ (.env)
```
# æž¶æž„æ¨¡å¼è®¾ç½® (true = Serverless æ¨¡å¼ï¼ŒæŽ¨è)
VITE_USE_SERVERLESS_FUNCTIONS=true

# Serverless æ¨¡å¼ä¸‹çš„ API URL (ç”Ÿäº§çŽ¯å¢ƒ)
VITE_SERVERLESS_API_URL=https://your-vercel-project.vercel.app/api

# å¼€å‘çŽ¯å¢ƒï¼ˆå¯é€‰ï¼Œç”¨äºŽæœ¬åœ°å¼€å‘è¿žæŽ¥åˆ°Vercelå‡½æ•°ï¼‰
# VITE_SERVERLESS_API_URL=http://localhost:3000/api
```

#### åŽç«¯çŽ¯å¢ƒå˜é‡ (.env) - ä¼ ç»Ÿæ¨¡å¼
```
# æœåŠ¡å™¨ç«¯å£
PORT=3000

# MongoDBè¿žæŽ¥
MONGODB_URI=mongodb://localhost:27017/love-story

# JWTå¯†é’¥
JWT_SECRET=your_jwt_secret_key

# EmailJSé…ç½®ï¼ˆçºªå¿µæ—¥é‚®ä»¶æé†’ï¼‰
EMAILJS_SERVICE_ID=your_service_id
EMAILJS_TEMPLATE_ID=your_reminder_template_id
EMAILJS_TODAY_TEMPLATE_ID=your_celebration_template_id
EMAILJS_PUBLIC_KEY=your_public_key
EMAILJS_PRIVATE_KEY=your_private_key

# Cron Jobè®¤è¯ä»¤ç‰Œï¼ˆå¯é€‰ï¼Œç”¨äºŽä¿æŠ¤è‡ªåŠ¨æé†’ç«¯ç‚¹ï¼‰
CRON_AUTH_TOKEN=your_secure_cron_auth_token
```

#### Serverless çŽ¯å¢ƒå˜é‡ (Vercel Dashboard) - æŽ¨èæ¨¡å¼
```
# MongoDBè¿žæŽ¥
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/database_name

# JWTå¯†é’¥
JWT_SECRET=your_secure_jwt_secret_key

# EmailJSé…ç½®ï¼ˆçºªå¿µæ—¥é‚®ä»¶æé†’ï¼‰
EMAILJS_SERVICE_ID=your_service_id
EMAILJS_TEMPLATE_ID=your_reminder_template_id
EMAILJS_TODAY_TEMPLATE_ID=your_celebration_template_id
EMAILJS_PUBLIC_KEY=your_public_key
EMAILJS_PRIVATE_KEY=your_private_key

# Cron Jobè®¤è¯ä»¤ç‰Œï¼ˆå¯é€‰ï¼Œç”¨äºŽä¿æŠ¤è‡ªåŠ¨æé†’ç«¯ç‚¹ï¼‰
CRON_AUTH_TOKEN=your_secure_cron_auth_token

# æ—¶åŒºè®¾ç½®ï¼ˆç”¨äºŽCron Jobsï¼‰
TZ=Asia/Shanghai
```

## éƒ¨ç½²æ–¹æ¡ˆ

### JAMstack éƒ¨ç½²ï¼ˆæŽ¨èï¼‰

#### Serverless éƒ¨ç½²æ¨¡å¼ (æ–°æŽ¨è)
- **æž¶æž„**: Vue.js å‰ç«¯ + Vercel Serverless Functions + MongoDB Atlas
- **å‰ç«¯éƒ¨ç½²åˆ° Vercel**:
  - ä½¿ç”¨Viteæž„å»ºç”Ÿäº§ç‰ˆæœ¬
  - å·²é…ç½® `vercel.json` æ”¯æŒ Vue Router å’Œ Cron Jobs
  - è‡ªåŠ¨å¤„ç†é™æ€èµ„æºç¼“å­˜
  - æ”¯æŒçŽ¯å¢ƒå˜é‡é…ç½®

- **åŽç«¯éƒ¨ç½²åˆ° Vercel**:
  - Serverless Functions éƒ¨ç½²åœ¨ Vercel å¹³å°
  - æ— éœ€ç®¡ç†æœåŠ¡å™¨å®žä¾‹
  - è‡ªåŠ¨æ‰©å±•ï¼ŒæŒ‰éœ€ä»˜è´¹
  - é›†æˆæ—¥å¿—å’Œç›‘æŽ§

#### çŽ¯å¢ƒé…ç½®
- **å¼€å‘çŽ¯å¢ƒ**: æœ¬åœ° `http://localhost:5173` (å‰ç«¯) + Vercel Functions (åŽç«¯)
- **ç”Ÿäº§çŽ¯å¢ƒ**: Vercel å‰åŽç«¯ + MongoDB Atlas
- **çŽ¯å¢ƒå˜é‡**: é€šè¿‡ `VITE_USE_SERVERLESS_FUNCTIONS` æŽ§åˆ¶æž¶æž„æ¨¡å¼

#### éƒ¨ç½²æ­¥éª¤ (Serverless æ¨¡å¼)
1. **Vercel éƒ¨ç½²**:
   ```bash
   vercel login
   vercel --prod
   ```

2. **çŽ¯å¢ƒå˜é‡è®¾ç½®**:
   - Vercel Dashboard: 
     - `VITE_USE_SERVERLESS_FUNCTIONS=true`
     - `MONGODB_URI`, `JWT_SECRET`, `EMAILJS_*` ç³»åˆ—å˜é‡
     - `CRON_AUTH_TOKEN` (å¯é€‰)

#### ä¼ ç»Ÿéƒ¨ç½²æ¨¡å¼ (å·²å¼ƒç”¨)
- **æž¶æž„**: Vue.js å‰ç«¯ + Express.js åŽç«¯æœåŠ¡å™¨ + MongoDB
- **å‰ç«¯éƒ¨ç½²åˆ° Vercel**:
  - ä½¿ç”¨Viteæž„å»ºç”Ÿäº§ç‰ˆæœ¬
  - å·²é…ç½® `vercel.json` æ”¯æŒ Vue Router
  - è‡ªåŠ¨å¤„ç†é™æ€èµ„æºç¼“å­˜
  - æ”¯æŒçŽ¯å¢ƒå˜é‡é…ç½®

- **åŽç«¯éƒ¨ç½²åˆ° Railway**:
  - å·²é…ç½® `railway.json` éƒ¨ç½²æ–‡ä»¶
  - æ”¯æŒå¥åº·æ£€æŸ¥ç«¯ç‚¹ `/health`
  - è‡ªåŠ¨æž„å»ºå’Œéƒ¨ç½²
  - çŽ¯å¢ƒå˜é‡ç®¡ç†

### æ•°æ®åº“
- MongoDB Atlasäº‘æ•°æ®åº“ï¼ˆæŽ¨èï¼‰
- æ”¯æŒæœ¬åœ°MongoDBå¼€å‘
- Serverless Functions ä½¿ç”¨åŽŸç”Ÿ MongoDB é©±åŠ¨è¿žæŽ¥æ•°æ®åº“

## é¡¹ç›®ç‰¹ç‚¹

1. **çŽ°ä»£åŒ–æŠ€æœ¯æ ˆ**: ä½¿ç”¨æœ€æ–°çš„Vue 3ã€TypeScriptã€Node.jsç­‰æŠ€æœ¯
2. **å“åº”å¼è®¾è®¡**: é€‚é…å„ç§è®¾å¤‡å±å¹•å°ºå¯¸
3. **PWAæ”¯æŒ**: å¯å®‰è£…ä¸ºæ‰‹æœºåº”ç”¨
4. **ç±»åž‹å®‰å…¨**: å…¨å±€ä½¿ç”¨TypeScriptï¼Œæä¾›å®Œæ•´çš„ç±»åž‹æ£€æŸ¥
5. **ç®€åŒ–æž¶æž„**: å›¾ç‰‡å­˜å‚¨åœ¨ MongoDB ä¸­ï¼Œæ— éœ€é¢å¤–äº‘å­˜å‚¨æœåŠ¡
6. **å®‰å…¨æ€§**: JWTè®¤è¯ï¼ŒHelmetå®‰å…¨å¤´ï¼ŒCORSè·¨åŸŸæ”¯æŒ
7. **å¼€å‘ä½“éªŒ**: Viteçƒ­é‡è½½ï¼ŒESLintä»£ç æ£€æŸ¥ï¼ŒPrettierä»£ç æ ¼å¼åŒ–

## Lightning CSS é›†æˆ

### ç®€ä»‹
Lightning CSS æ˜¯ä¸€ä¸ªç”¨ Rust ç¼–å†™çš„ CSS è§£æžå™¨ã€è½¬æ¢å™¨å’Œä¼˜åŒ–å™¨ã€‚å®ƒæä¾›äº†æ¯”ä¼ ç»Ÿå·¥å…·æ›´å¿«çš„å¤„ç†é€Ÿåº¦ï¼Œå¹¶æ”¯æŒçŽ°ä»£ CSS ç‰¹æ€§ã€‚

### é…ç½®
åœ¨ `vite.config.ts` ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```ts
export default defineConfig({
  css: {
    transformer: 'lightningcss',
    lightningcss: {
      targets: {
        chrome: 80,
        firefox: 70,
        safari: 13,
        edge: 80
      }
    }
  }
})
```

### ç‰¹æ€§æ”¯æŒ
1. **è‡ªåŠ¨æµè§ˆå™¨å‰ç¼€**: Lightning CSS ä¼šè‡ªåŠ¨ä¸ºéœ€è¦çš„ CSS å±žæ€§æ·»åŠ æµè§ˆå™¨å‰ç¼€ï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚
2. **CSS åµŒå¥— (Nesting)**: æ”¯æŒ CSS åµŒå¥—è¯­æ³•ã€‚
3. **CSS å˜é‡ä¼˜åŒ–**: Lightning CSS ä¼šä¼˜åŒ– CSS å˜é‡çš„ä½¿ç”¨ï¼Œæé«˜æ€§èƒ½ã€‚

### ç§»é™¤å†²çªçš„å·¥å…·
åœ¨ä½¿ç”¨ Lightning CSS æ—¶ï¼Œåº”è¯¥ç§»é™¤å…¶ä»– CSS å¤„ç†å·¥å…·ä»¥é¿å…å†²çªï¼š
```bash
pnpm remove postcss autoprefixer
```

## EmailJS é…ç½®è¯¦è§£

### ç§é’¥è®¤è¯æ”¯æŒ
é¡¹ç›®å·²å‡çº§æ”¯æŒ EmailJS ç§é’¥è®¤è¯ï¼Œæä¾›æ›´å¥½çš„å®‰å…¨æ€§ï¼š

1. **å…¬é’¥åˆå§‹åŒ–**: ä½¿ç”¨ `EMAILJS_PUBLIC_KEY` åˆå§‹åŒ– EmailJS å®¢æˆ·ç«¯
2. **ç§é’¥å‘é€**: ä½¿ç”¨ `EMAILJS_PRIVATE_KEY` è¿›è¡Œé‚®ä»¶å‘é€è®¤è¯
3. **æ¨¡æ¿å‚æ•°**: æ”¯æŒå®Œæ•´çš„æ¨¡æ¿å‚æ•°æ˜ å°„

### åŒæ¨¡æ¿ç³»ç»Ÿ
ç³»ç»ŸçŽ°åœ¨æ”¯æŒä¸¤ç§ä¸åŒçš„é‚®ä»¶æ¨¡æ¿ï¼š

#### 1. æå‰æé†’æ¨¡æ¿ (EMAILJS_TEMPLATE_ID)
**è§¦å‘æ¡ä»¶**: `daysLeft > 0` ä¸” `daysLeft <= reminderDays`
**ç”¨é€”**: æå‰æé†’å³å°†åˆ°æ¥çš„çºªå¿µæ—¥
**å‚æ•°**:
- `anniversary_name`: çºªå¿µæ—¥åç§°
- `days_left`: è·ç¦»çºªå¿µæ—¥çš„å¤©æ•°
- `anniversary_date_formatted`: æ ¼å¼åŒ–çš„çºªå¿µæ—¥æ—¥æœŸï¼ˆä¸­æ–‡æ ¼å¼ï¼‰
- `anniversary_weekday`: çºªå¿µæ—¥æ˜¯æ˜ŸæœŸå‡ 
- `current_date`: å½“å‰æ—¥æœŸï¼ˆä¸­æ–‡æ ¼å¼ï¼‰
- `name`: ç”¨æˆ·å§“å
- `email`: ç”¨æˆ·é‚®ç®±åœ°å€

#### 2. å½“å¤©åº†ç¥æ¨¡æ¿ (EMAILJS_TODAY_TEMPLATE_ID)
**è§¦å‘æ¡ä»¶**: `daysLeft === 0`
**ç”¨é€”**: å½“å¤©çºªå¿µæ—¥çš„åº†ç¥é‚®ä»¶
**å‚æ•°**:
- `anniversary_name`: çºªå¿µæ—¥åç§°
- `anniversary_date_formatted`: æ ¼å¼åŒ–çš„çºªå¿µæ—¥æ—¥æœŸï¼ˆä¸­æ–‡æ ¼å¼ï¼‰
- `anniversary_weekday`: çºªå¿µæ—¥æ˜¯æ˜ŸæœŸå‡ 
- `current_date`: å½“å‰æ—¥æœŸï¼ˆä¸­æ–‡æ ¼å¼ï¼‰
- `name`: ç”¨æˆ·å§“å
- `email`: ç”¨æˆ·é‚®ç®±åœ°å€
- **æ³¨æ„**: åº†ç¥æ¨¡æ¿ä¸åŒ…å« `days_left` å‚æ•°

### é…ç½®æ­¥éª¤
1. åœ¨ EmailJS æŽ§åˆ¶å°åˆ›å»ºæœåŠ¡å’Œæ¨¡æ¿
2. èŽ·å–æœåŠ¡IDã€æ¨¡æ¿IDã€å…¬é’¥å’Œç§é’¥
3. åœ¨æœåŠ¡å™¨çŽ¯å¢ƒå˜é‡ä¸­é…ç½®ç›¸å…³å‚æ•°
4. æ¨¡æ¿ä¸­ä½¿ç”¨ `{{parameter_name}}` æ ¼å¼å¼•ç”¨å‚æ•°

## è‡ªåŠ¨é‚®ä»¶æé†’ç³»ç»Ÿ

### å®šæ—¶ä»»åŠ¡é…ç½®
- **è§¦å‘æ—¶é—´**: æ¯å¤©æ—©ä¸Š 7:00 AM (Asia/Shanghai æ—¶åŒº)
- **ä½¿ç”¨æŠ€æœ¯**: node-cron
- **ä»»åŠ¡æ–‡ä»¶**: `server/utils/scheduler.ts`

### è‡ªåŠ¨å‘é€é€»è¾‘
1. **æ¯æ—¥æ£€æŸ¥**: å®šæ—¶ä»»åŠ¡æ¯å¤©æ—©ä¸Š7ç‚¹è‡ªåŠ¨æ‰§è¡Œ
2. **èŽ·å–æ•°æ®**: æŸ¥è¯¢æ‰€æœ‰çºªå¿µæ—¥å’Œæ‰€æœ‰ç”¨æˆ·
3. **æ¡ä»¶åŒ¹é…**: æ£€æŸ¥æ¯ä¸ªçºªå¿µæ—¥çš„ `daysUntil === reminderDays`
4. **æ‰¹é‡å‘é€**: ç¬¦åˆæ¡ä»¶çš„çºªå¿µæ—¥ä¼šå‘æ‰€æœ‰æ³¨å†Œç”¨æˆ·å‘é€é‚®ä»¶
5. **é”™è¯¯å¤„ç†**: è®°å½•å‘é€æˆåŠŸå’Œå¤±è´¥çš„æ•°é‡ï¼Œå¹¶è¾“å‡ºè¯¦ç»†é”™è¯¯ä¿¡æ¯
6. **é€ŸçŽ‡é™åˆ¶**: æ¯å°é‚®ä»¶ä¹‹é—´é—´éš”1ç§’ï¼Œé¿å…è§¦å‘é‚®ä»¶æœåŠ¡å•†çš„é€ŸçŽ‡é™åˆ¶

#### çºªå¿µæ—¥æ¨¡åž‹å˜æ›´
- **ç§»é™¤ç”¨æˆ·å…³è”**: çºªå¿µæ—¥ä¸å†å±žäºŽç‰¹å®šç”¨æˆ·
- **å…¨å±€å…±äº«**: æ‰€æœ‰ç”¨æˆ·éƒ½èƒ½çœ‹åˆ°å’Œç®¡ç†æ‰€æœ‰çºªå¿µæ—¥
- **ç»Ÿä¸€æé†’**: ä¸€ä¸ªçºªå¿µæ—¥ä¼šå‘æ‰€æœ‰ç”¨æˆ·å‘é€é‚®ä»¶æé†’

### æ‰‹åŠ¨æµ‹è¯•åŠŸèƒ½
- **æµ‹è¯•API**: `POST /api/anniversaries/remind` (éœ€æä¾› `testAllReminders=true`)
- **æµ‹è¯•èŒƒå›´**: å‘é€æœªæ¥7å¤©å†…çš„æ‰€æœ‰çºªå¿µæ—¥æé†’
- **å‰ç«¯æŒ‰é’®**: "æµ‹è¯•å‘é€æ‰€æœ‰é‚®ä»¶æé†’" æŒ‰é’®
- **å•ä¸ªå‘é€**: æ¯ä¸ªçºªå¿µæ—¥å¡ç‰‡ä¸Šçš„ ðŸ“§ æŒ‰é’®å¯å•ç‹¬æµ‹è¯•å‘é€

### Serverless æž¶æž„å¢žå¼º
- **æ–°å¢žAPIç«¯ç‚¹**: 
  - `POST /api/anniversaries/remind` - å‘é€å•ä¸ªçºªå¿µæ—¥æé†’ç»™æ‰€æœ‰ç”¨æˆ·
  - `POST /api/cron/send-anniversary-reminders` - è‡ªåŠ¨é‚®ä»¶æé†’cronä»»åŠ¡
  - `POST /api/images/upload` - å›¾ç‰‡ä¸Šä¼ 
  - `DELETE /api/images/[id]` - åˆ é™¤å›¾ç‰‡
- **Serverlessä¼˜åŒ–**: 
  - æ•°æ®åº“è¿žæŽ¥å¤ç”¨
  - æ— çŠ¶æ€å‡½æ•°è®¾è®¡
  - Vercel Cron Jobsé›†æˆ
- **æž¶æž„çµæ´»æ€§**: æ”¯æŒServerlesså’Œä¼ ç»Ÿä¸¤ç§éƒ¨ç½²æ¨¡å¼

### é‚®ä»¶å‘é€çŠ¶æ€
- **æˆåŠŸç»Ÿè®¡**: è®°å½•æˆåŠŸå‘é€çš„é‚®ä»¶æ•°é‡
- **å¤±è´¥ç»Ÿè®¡**: è®°å½•å‘é€å¤±è´¥çš„é‚®ä»¶æ•°é‡
- **é”™è¯¯è¯¦æƒ…**: è®°å½•å…·ä½“çš„é”™è¯¯ä¿¡æ¯å’Œå¤±è´¥çš„é‚®ç®±åœ°å€
- **æ—¥å¿—è¾“å‡º**: æ‰€æœ‰æ“ä½œéƒ½ä¼šåœ¨æœåŠ¡å™¨æŽ§åˆ¶å°è¾“å‡ºè¯¦ç»†æ—¥å¿—

## åŽç»­ä¼˜åŒ–å»ºè®®

1. æ·»åŠ å•å…ƒæµ‹è¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•
2. å®žçŽ°æ›´ä¸°å¯Œçš„UIç»„ä»¶å’ŒåŠ¨ç”»æ•ˆæžœ
3. æ·»åŠ æ•°æ®å¤‡ä»½å’Œæ¢å¤åŠŸèƒ½
4. å®žçŽ°å¤šè¯­è¨€æ”¯æŒ
5. æ·»åŠ æ•°æ®åˆ†æžå’Œç»Ÿè®¡åŠŸèƒ½
6. ä¼˜åŒ–ç§»åŠ¨ç«¯ç”¨æˆ·ä½“éªŒ